
<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Мир в науке</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: #6c5ce7;
            --secondary: #00cec9;
            --math-color: #fd79a8;
            --physics-color: #fab1a0;
            --success: #00b894;
            --danger: #d63031;
            --warning: #fdcb6e;
            --dark: #2d3436;
            --light: #f9f9f9;
            --bg-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
            --card-bg: rgba(255, 255, 255, 0.95);
            --card-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            --border-radius: 20px;
            --transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--bg-gradient);
            background-size: 400% 400%;
            animation: gradientMove 20s ease infinite;
            color: var(--dark);
            min-height: 100vh;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
        }

        @keyframes gradientMove {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            flex: 1;
        }

        /* Шапка */
        header {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: var(--border-radius);
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .logo-icon {
            font-size: 2.5rem;
            background: var(--primary);
            color: white;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .logo-text h1 {
            font-size: 1.8rem;
            color: var(--dark);
            font-weight: 700;
        }

        .logo-text p {
            color: #666;
            font-size: 0.9rem;
        }

        /* Навигация по предметам */
        .subject-nav {
            display: flex;
            gap: 20px;
        }

        .subject-btn {
            padding: 12px 25px;
            border: none;
            border-radius: 50px;
            background: white;
            color: var(--dark);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .subject-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        .subject-btn.active {
            background: var(--primary);
            color: white;
        }

        .subject-btn.math.active {
            background: var(--math-color);
        }

        .subject-btn.physics.active {
            background: var(--physics-color);
        }

        /* Экран выбора предмета */
        .subject-selection {
            text-align: center;
            padding: 60px 20px;
        }

        .selection-title {
            font-size: 3rem;
            color: white;
            margin-bottom: 20px;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .selection-subtitle {
            font-size: 1.2rem;
            color: rgba(255, 255, 255, 0.9);
            margin-bottom: 50px;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .subject-cards {
            display: flex;
            justify-content: center;
            gap: 40px;
            flex-wrap: wrap;
        }

        .subject-card {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 40px;
            width: 350px;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: var(--card-shadow);
            border: 2px solid transparent;
        }

        .subject-card:hover {
            transform: translateY(-20px);
            border-color: var(--primary);
        }

        .subject-icon {
            font-size: 5rem;
            margin-bottom: 20px;
        }

        .subject-card.math .subject-icon {
            color: var(--math-color);
        }

        .subject-card.physics .subject-icon {
            color: var(--physics-color);
        }

        .subject-card h2 {
            font-size: 2rem;
            margin-bottom: 15px;
        }

        .subject-card p {
            color: #666;
            line-height: 1.6;
            margin-bottom: 25px;
        }

        /* Контент предмета */
        .subject-content {
            display: none;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .subject-content.active {
            display: block;
        }

        /* Навигация внутри предмета */
        .content-nav {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
            flex-wrap: wrap;
        }

        .content-btn {
            padding: 15px 30px;
            background: var(--card-bg);
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }

        .content-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
        }

        .content-btn.active {
            background: var(--primary);
            color: white;
        }

        /* Управление командами */
        .teams-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 25px;
            color: var(--dark);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .section-title i {
            color: var(--primary);
        }

        .teams-control {
            display: flex;
            gap: 20px;
            margin-bottom: 25px;
            flex-wrap: wrap;
        }

        .team-input-container {
            flex: 1;
            min-width: 250px;
        }

        .team-input-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #555;
        }

        .team-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .team-input:focus {
            border-color: var(--primary);
            outline: none;
            box-shadow: 0 0 0 3px rgba(108, 92, 231, 0.2);
        }

        .teams-display {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .team-card {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 20px;
            border-radius: 15px;
            min-width: 200px;
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .team-card.current {
            transform: scale(1.05);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        .team-card.current::after {
            content: 'ХОД';
            position: absolute;
            top: 10px;
            right: 10px;
            background: var(--success);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .team-name {
            font-size: 1.3rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .team-score {
            font-size: 2rem;
            font-weight: 800;
        }

        /* Квиз в виде таблицы */
        .quiz-table-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
            overflow-x: auto;
        }

        .quiz-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .quiz-table th {
            background: var(--primary);
            color: white;
            padding: 20px;
            text-align: center;
            font-weight: 600;
            font-size: 1.1rem;
        }

        .quiz-table td {
            padding: 20px;
            text-align: center;
            border-bottom: 1px solid #f0f0f0;
            transition: var(--transition);
        }

        .quiz-table tr:hover td {
            background: rgba(108, 92, 231, 0.05);
        }

        .topic-cell {
            background: rgba(108, 92, 231, 0.1);
            font-weight: 600;
            text-align: left;
            color: var(--dark);
        }

        .question-cell {
            cursor: pointer;
            position: relative;
            font-weight: 500;
        }

        .question-cell:hover {
            background: rgba(108, 92, 231, 0.1) !important;
        }

        .question-cell.answered {
            background: rgba(0, 184, 148, 0.1);
            color: var(--success);
        }

        .question-cell.answered.wrong {
            background: rgba(214, 48, 49, 0.1);
            color: var(--danger);
        }

        .question-points {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        /* Окно вопроса */
        .question-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .question-modal.active {
            display: flex;
        }

        .question-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
        }

        .close-modal {
            position: absolute;
            top: 20px;
            right: 20px;
            background: var(--danger);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: var(--transition);
        }

        .close-modal:hover {
            transform: rotate(90deg);
        }

        .question-text {
            font-size: 1.3rem;
            margin-bottom: 30px;
            line-height: 1.6;
            color: var(--dark);
        }

        .answers-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .answer-btn {
            padding: 20px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            background: white;
            text-align: left;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
            color: var(--dark);
        }

        .answer-btn:hover {
            border-color: var(--primary);
            transform: translateX(5px);
        }

        .answer-btn.selected {
            border-color: var(--primary);
            background: rgba(108, 92, 231, 0.1);
        }

        .modal-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 30px;
        }

        .current-team-info {
            font-weight: 600;
            color: var(--primary);
            font-size: 1.1rem;
        }

        /* Задачи */
        .tasks-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .task {
            background: white;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
            border-left: 5px solid var(--primary);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.05);
            transition: var(--transition);
        }

        .task:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
        }

        .task-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .task-number {
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary);
        }

        .task-attempts {
            display: flex;
            gap: 10px;
        }

        .attempt-dot {
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #e0e0e0;
        }

        .attempt-dot.used {
            background: var(--danger);
        }

        .task-text {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 25px;
            color: var(--dark);
        }

        .task-image {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
            margin-bottom: 25px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .answer-input-container {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }

        .answer-input {
            flex: 1;
            min-width: 250px;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            font-size: 1rem;
            transition: var(--transition);
        }

        .answer-input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .task-btn {
            padding: 15px 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 10px;
            justify-content: center;
            min-width: 180px;
        }

        .task-btn:hover {
            background: var(--secondary);
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .task-feedback {
            margin-top: 20px;
            padding: 20px;
            border-radius: 15px;
            display: none;
        }

        .task-feedback.correct {
            background: rgba(0, 184, 148, 0.1);
            border: 2px solid var(--success);
            color: var(--success);
            display: block;
        }

        .task-feedback.incorrect {
            background: rgba(214, 48, 49, 0.1);
            border: 2px solid var(--danger);
            color: var(--danger);
            display: block;
        }

        /* Ученые */
        .scientists-section {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: var(--card-shadow);
        }

        .scientists-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 30px;
        }

        .scientist-card {
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.1);
            transition: var(--transition);
            cursor: pointer;
            position: relative;
        }

        .scientist-card:hover {
            transform: translateY(-15px);
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.15);
        }

        .scientist-image {
            width: 100%;
            height: 250px;
            object-fit: cover;
            background: #f0f0f0;
        }

        .scientist-info {
            padding: 25px;
        }

        .scientist-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .scientist-field {
            color: var(--primary);
            font-weight: 600;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .scientist-facts {
            color: #666;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .scientist-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .scientist-modal.active {
            display: flex;
        }

        .scientist-modal-content {
            background: var(--card-bg);
            border-radius: var(--border-radius);
            padding: 40px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
        }

        .scientist-modal-header {
            display: flex;
            gap: 30px;
            margin-bottom: 30px;
            align-items: center;
            flex-wrap: wrap;
        }

        .scientist-modal-image {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            object-fit: cover;
            border: 5px solid var(--primary);
            background: #f0f0f0;
        }

        .scientist-modal-info h2 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            color: var(--dark);
        }

        .scientist-modal-field {
            font-size: 1.2rem;
            color: var(--primary);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .scientist-modal-details {
            margin-top: 30px;
        }

        .scientist-modal-details h3 {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: var(--dark);
            border-bottom: 2px solid var(--primary);
            padding-bottom: 10px;
        }

        .scientist-modal-details p {
            line-height: 1.8;
            margin-bottom: 15px;
            color: #555;
        }

        /* Кнопки действий */
        .action-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-top: 30px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 18px 35px;
            border: none;
            border-radius: 50px;
            font-weight: 600;
            font-size: 1.1rem;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            gap: 12px;
            min-width: 200px;
            justify-content: center;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        .action-btn.primary {
            background: var(--primary);
            color: white;
        }

        .action-btn.secondary {
            background: var(--secondary);
            color: white;
        }

        .action-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
        }

        /* Футер */
        footer {
            background: rgba(255, 255, 255, 0.9);
            padding: 30px 20px;
            text-align: center;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            margin-top: auto;
        }

        .footer-content {
            max-width: 1200px;
            margin: 0 auto;
        }

        .footer-title {
            font-size: 1.2rem;
            color: var(--dark);
            margin-bottom: 10px;
            font-weight: 600;
        }

        .footer-developers {
            color: #666;
            line-height: 1.6;
            margin-bottom: 20px;
        }

        .footer-tech {
            color: #888;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
            padding-top: 15px;
            margin-top: 15px;
        }

        /* Адаптивность */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            header {
                flex-direction: column;
                gap: 20px;
                text-align: center;
            }
            
            .selection-title {
                font-size: 2.2rem;
            }
            
            .subject-cards {
                flex-direction: column;
                align-items: center;
            }
            
            .subject-card {
                width: 100%;
                max-width: 400px;
            }
            
            /* Убираем навигацию Команды/Квиз/Задачи/Ученые */
            .content-nav {
                display: none;
            }
            
            .teams-control {
                flex-direction: column;
            }
            
            .quiz-table {
                font-size: 0.9rem;
            }
            
            .answers-container {
                grid-template-columns: 1fr;
            }
            
            .scientists-grid {
                grid-template-columns: 1fr;
            }
            
            .scientist-modal-header {
                flex-direction: column;
                text-align: center;
            }
            
            .action-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .action-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .answer-input-container {
                flex-direction: column;
            }
            
            .answer-input {
                width: 100%;
            }
            
            .task-btn {
                width: 100%;
            }
        }

        @media (max-width: 480px) {
            .selection-title {
                font-size: 1.8rem;
            }
            
            .subject-card {
                padding: 25px;
            }
            
            .subject-icon {
                font-size: 4rem;
            }
            
            .team-card {
                min-width: 100%;
            }
            
            .question-content {
                padding: 25px;
            }
            
            .scientist-modal-content {
                padding: 25px;
            }
            
            .scientist-modal-info h2 {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Шапка -->
        <header id="main-header">
            <div class="logo">
                <div class="logo-icon">
                    <i class="fas fa-graduation-cap"></i>
                </div>
                <div class="logo-text">
                    <h1>Мир в науке</h1>
                    <p>Физика и Математика • 10-11 классы, 1 курс СПО</p>
                </div>
            </div>
            
            <div class="subject-nav" id="subject-nav">
                <button class="subject-btn math" data-subject="math">
                    <i class="fas fa-calculator"></i>
                    Математика
                </button>
                <button class="subject-btn physics" data-subject="physics">
                    <i class="fas fa-atom"></i>
                    Физика
                </button>
            </div>
        </header>

        <!-- Экран выбора предмета -->
        <section class="subject-selection" id="subject-selection">
            <h1 class="selection-title">Выберите предмет для изучения</h1>
            <p class="selection-subtitle">Изучайте сложные темы через интерактивные квизы, задачи и знакомство с великими учеными</p>
            
            <div class="subject-cards">
                <div class="subject-card math" data-subject="math">
                    <div class="subject-icon">
                        <i class="fas fa-calculator"></i>
                    </div>
                    <h2>Математика</h2>
                    <p>Алгебра, геометрия, математический анализ, тригонометрия, логарифмы и многое другое для 10-11 классов и 1 курса СПО</p>
                    <div class="action-buttons">
                        <button class="action-btn primary start-subject" data-subject="math">
                            <i class="fas fa-play-circle"></i>
                            Начать изучение
                        </button>
                    </div>
                </div>
                
                <div class="subject-card physics" data-subject="physics">
                    <div class="subject-icon">
                        <i class="fas fa-atom"></i>
                    </div>
                    <h2>Физика</h2>
                    <p>Механика, термодинамика, электродинамика, квантовая физика, оптика и астрофизика для старших классов и 1 курса СПО</p>
                    <div class="action-buttons">
                        <button class="action-btn primary start-subject" data-subject="physics">
                            <i class="fas fa-play-circle"></i>
                            Начать изучение
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Контент математики -->
        <section class="subject-content" id="math-content">
            <!-- Управление командами -->
            <div class="content-section teams-section active" id="math-teams">
                <h2 class="section-title">
                    <i class="fas fa-users"></i>
                    Управление командами для математики
                </h2>
                
                <div class="teams-control">
                    <div class="team-input-container">
                        <label class="team-input-label">Команда 1</label>
                        <input type="text" class="team-input" id="math-team1" value="Геометры" placeholder="Введите название команды">
                    </div>
                    <div class="team-input-container">
                        <label class="team-input-label">Команда 2</label>
                        <input type="text" class="team-input" id="math-team2" value="Алгебраисты" placeholder="Введите название команды">
                    </div>
                    <div class="team-input-container">
                        <label class="team-input-label">Команда 3 (необязательно)</label>
                        <input type="text" class="team-input" id="math-team3" placeholder="Введите название команды (оставьте пустым, если команды нет)">
                    </div>
                </div>
                
                <div class="action-buttons" style="margin-bottom: 25px;">
                    <button class="action-btn secondary" id="math-next-team">
                        <i class="fas fa-user-friends"></i>
                        Следующая команда
                    </button>
                </div>
                
                <div class="teams-display" id="math-teams-display">
                    <!-- Команды будут здесь -->
                </div>
                
                <div class="action-buttons" style="margin-top: 30px;">
                    <button class="action-btn primary" data-content="quiz">
                        <i class="fas fa-brain"></i>
                        Перейти к квизу
                    </button>
                    <button class="action-btn secondary" data-content="tasks">
                        <i class="fas fa-tasks"></i>
                        Перейти к задачам
                    </button>
                    <button class="action-btn primary" data-content="scientists">
                        <i class="fas fa-user-tie"></i>
                        Перейти к ученым
                    </button>
                </div>
            </div>

            <!-- Квиз по математике -->
            <div class="content-section quiz-table-section" id="math-quiz">
                <h2 class="section-title">
                    <i class="fas fa-brain"></i>
                    Математический квиз для 10-11 классов
                </h2>
                
                <div class="action-buttons" style="margin-bottom: 30px;">
                    <button class="action-btn secondary" id="math-next-team-quiz">
                        <i class="fas fa-user-friends"></i>
                        Следующая команда
                    </button>
                    <button class="action-btn primary" id="math-reset-quiz">
                        <i class="fas fa-redo"></i>
                        Начать квиз заново
                    </button>
                    <button class="action-btn secondary" data-content="teams">
                        <i class="fas fa-users"></i>
                        Вернуться к командам
                    </button>
                </div>
                
                <table class="quiz-table" id="math-quiz-table">
                    <thead>
                        <tr>
                            <th>Тема</th>
                            <th>10 баллов</th>
                            <th>20 баллов</th>
                            <th>30 баллов</th>
                            <th>40 баллов</th>
                            <th>50 баллов</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Строки будут заполнены JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Задачи по математике -->
            <div class="content-section tasks-section" id="math-tasks">
                <h2 class="section-title">
                    <i class="fas fa-tasks"></i>
                    Задачи по математике 10-11 класс
                </h2>
                
                <div id="math-tasks-container">
                    <!-- Задачи будут здесь -->
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn primary" id="math-next-task">
                        <i class="fas fa-forward"></i>
                        Следующая задача
                    </button>
                    <button class="action-btn secondary" data-content="teams">
                        <i class="fas fa-users"></i>
                        Вернуться к командам
                    </button>
                </div>
            </div>

            <!-- Ученые-математики -->
            <div class="content-section scientists-section" id="math-scientists">
                <h2 class="section-title">
                    <i class="fas fa-user-tie"></i>
                    Великие математики
                </h2>
                
                <div class="scientists-grid" id="math-scientists-grid">
                    <!-- Ученые будут здесь -->
                </div>
                
                <div class="action-buttons" style="margin-top: 30px;">
                    <button class="action-btn secondary" data-content="teams">
                        <i class="fas fa-users"></i>
                        Вернуться к командам
                    </button>
                </div>
            </div>
        </section>

        <!-- Контент физики -->
        <section class="subject-content" id="physics-content">
            <!-- Управление командами -->
            <div class="content-section teams-section active" id="physics-teams">
                <h2 class="section-title">
                    <i class="fas fa-users"></i>
                    Управление командами для физики
                </h2>
                
                <div class="teams-control">
                    <div class="team-input-container">
                        <label class="team-input-label">Команда 1</label>
                        <input type="text" class="team-input" id="physics-team1" value="Протоны" placeholder="Введите название команды">
                    </div>
                    <div class="team-input-container">
                        <label class="team-input-label">Команда 2</label>
                        <input type="text" class="team-input" id="physics-team2" value="Электроны" placeholder="Введите название команды">
                    </div>
                    <div class="team-input-container">
                        <label class="team-input-label">Команда 3 (необязательно)</label>
                        <input type="text" class="team-input" id="physics-team3" placeholder="Введите название команды (оставьте пустым, если команды нет)">
                    </div>
                </div>
                
                <div class="action-buttons" style="margin-bottom: 25px;">
                    <button class="action-btn secondary" id="physics-next-team">
                        <i class="fas fa-user-friends"></i>
                        Следующая команда
                    </button>
                </div>
                
                <div class="teams-display" id="physics-teams-display">
                    <!-- Команды будут здесь -->
                </div>
                
                <div class="action-buttons" style="margin-top: 30px;">
                    <button class="action-btn primary" data-content="quiz">
                        <i class="fas fa-brain"></i>
                        Перейти к квизу
                    </button>
                    <button class="action-btn secondary" data-content="tasks">
                        <i class="fas fa-tasks"></i>
                        Перейти к задачам
                    </button>
                    <button class="action-btn primary" data-content="scientists">
                        <i class="fas fa-user-tie"></i>
                        Перейти к ученым
                    </button>
                </div>
            </div>

            <!-- Квиз по физике -->
            <div class="content-section quiz-table-section" id="physics-quiz">
                <h2 class="section-title">
                    <i class="fas fa-brain"></i>
                    Физический квиз для 10-11 классов
                </h2>
                
                <div class="action-buttons" style="margin-bottom: 30px;">
                    <button class="action-btn secondary" id="physics-next-team-quiz">
                        <i class="fas fa-user-friends"></i>
                        Следующая команда
                    </button>
                    <button class="action-btn primary" id="physics-reset-quiz">
                        <i class="fas fa-redo"></i>
                        Начать квиз заново
                    </button>
                    <button class="action-btn secondary" data-content="teams">
                        <i class="fas fa-users"></i>
                        Вернуться к командам
                    </button>
                </div>
                
                <table class="quiz-table" id="physics-quiz-table">
                    <thead>
                        <tr>
                            <th>Тема</th>
                            <th>10 баллов</th>
                            <th>20 баллов</th>
                            <th>30 баллов</th>
                            <th>40 баллов</th>
                            <th>50 баллов</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Строки будут заполнены JavaScript -->
                    </tbody>
                </table>
            </div>

            <!-- Задачи по физике -->
            <div class="content-section tasks-section" id="physics-tasks">
                <h2 class="section-title">
                    <i class="fas fa-tasks"></i>
                    Задачи по физике 10-11 класс
                </h2>
                
                <div id="physics-tasks-container">
                    <!-- Задачи будут здесь -->
                </div>
                
                <div class="action-buttons">
                    <button class="action-btn primary" id="physics-next-task">
                        <i class="fas fa-forward"></i>
                        Следующая задача
                    </button>
                    <button class="action-btn secondary" data-content="teams">
                        <i class="fas fa-users"></i>
                        Вернуться к командам
                    </button>
                </div>
            </div>

            <!-- Ученые-физики -->
            <div class="content-section scientists-section" id="physics-scientists">
                <h2 class="section-title">
                    <i class="fas fa-user-tie"></i>
                    Великие физики
                </h2>
                
                <div class="scientists-grid" id="physics-scientists-grid">
                    <!-- Ученые будут здесь -->
                </div>
                
                <div class="action-buttons" style="margin-top: 30px;">
                    <button class="action-btn secondary" data-content="teams">
                        <i class="fas fa-users"></i>
                        Вернуться к командам
                    </button>
                </div>
            </div>
        </section>
    </div>

    <!-- Модальное окно вопроса -->
    <div class="question-modal" id="question-modal">
        <div class="question-content" id="question-content">
            <button class="close-modal" id="close-question-modal">
                <i class="fas fa-times"></i>
            </button>
            
            <div id="question-data">
                <!-- Контент вопроса будет здесь -->
            </div>
        </div>
    </div>

    <!-- Модальное окно ученого -->
    <div class="scientist-modal" id="scientist-modal">
        <div class="scientist-modal-content" id="scientist-modal-content">
            <button class="close-modal" id="close-scientist-modal">
                <i class="fas fa-times"></i>
            </button>
            
            <div id="scientist-data">
                <!-- Контент ученого будет здесь -->
            </div>
        </div>
    </div>

    <!-- Футер -->
    <footer>
        <div class="footer-content">
            <div class="footer-title">Мир в науке</div>
            <div class="footer-developers">
                Разработан студентами Томского техникума информационных технологий "ТТИТ":<br>
                Болохова Ксения Максимовна • Луговской Данил Кириллович
            </div>
            <div class="footer-tech">
                Образовательная платформа для изучения физики и математики 10-11 классов и 1 курса СПО
            </div>
        </div>
    </footer>

    <script>
        // Данные для приложения
        const appData = {
            currentSubject: null,
            currentContent: 'teams',
            
            // Команды
            mathTeams: [
                { name: 'Геометры', score: 0, isCurrent: true },
                { name: 'Алгебраисты', score: 0, isCurrent: false }
            ],
            
            physicsTeams: [
                { name: 'Протоны', score: 0, isCurrent: true },
                { name: 'Электроны', score: 0, isCurrent: false }
            ],
            
            // Квиз по математике (полный, до 50 баллов)
            mathQuiz: {
                topics: [
                    'Тригонометрия',
                    'Логарифмы',
                    'Производные',
                    'Интегралы',
                    'Теория вероятностей'
                ],
                questions: [
                    // Тригонометрия
                    [
                        {
                            points: 10,
                            question: 'Чему равен sin(π/6)?',
                            answers: ['1/2', '√2/2', '√3/2', '1'],
                            correct: 0,
                            explanation: 'sin(π/6) = 1/2 - это табличное значение'
                        },
                        {
                            points: 20,
                            question: 'Решите уравнение: 2sin²x - 1 = 0 на промежутке [0, 2π]',
                            answers: ['π/4, 3π/4', 'π/4, 3π/4, 5π/4, 7π/4', 'π/2, 3π/2', '0, π'],
                            correct: 1,
                            explanation: '2sin²x = 1 ⇒ sin²x = 1/2 ⇒ sinx = ±√2/2. x = π/4, 3π/4, 5π/4, 7π/4'
                        },
                        {
                            points: 30,
                            question: 'Упростите выражение: (sinα + cosα)² + (sinα - cosα)²',
                            answers: ['1', '2', 'sin²α + cos²α', '0'],
                            correct: 1,
                            explanation: 'Раскрываем скобки: sin²α + 2sinαcosα + cos²α + sin²α - 2sinαcosα + cos²α = 2(sin²α + cos²α) = 2'
                        },
                        {
                            points: 40,
                            question: 'Найдите значение выражения: sin75°·cos15°',
                            answers: ['1/4', '1/2', '√3/4', '(√6+√2)/4'],
                            correct: 0,
                            explanation: 'Используем формулу: sinA·cosB = 1/2[sin(A+B) + sin(A-B)] = 1/2[sin90° + sin60°] = 1/2[1 + √3/2] = 1/2 + √3/4'
                        },
                        {
                            points: 50,
                            question: 'Решите уравнение: sinx + cosx = 1',
                            answers: ['x = 2πk, x = π/2 + 2πk', 'x = πk, x = π/2 + 2πk', 'x = 0, x = π/2', 'x = π/2 + 2πk'],
                            correct: 0,
                            explanation: 'sinx + cosx = √2sin(x+π/4) = 1 ⇒ sin(x+π/4) = √2/2 ⇒ x+π/4 = π/4+2πk или x+π/4 = 3π/4+2πk'
                        }
                    ],
                    // Логарифмы
                    [
                        {
                            points: 10,
                            question: 'Чему равен log₂8?',
                            answers: ['2', '3', '4', '5'],
                            correct: 1,
                            explanation: '2³ = 8, поэтому log₂8 = 3'
                        },
                        {
                            points: 20,
                            question: 'Решите уравнение: log₃(x+1) = 2',
                            answers: ['8', '9', '10', '11'],
                            correct: 0,
                            explanation: 'log₃(x+1) = 2 ⇒ x+1 = 3² = 9 ⇒ x = 8'
                        },
                        {
                            points: 30,
                            question: 'Упростите: log₅125 + log₅25 - log₅5',
                            answers: ['3', '4', '5', '6'],
                            correct: 1,
                            explanation: 'log₅125 = 3, log₅25 = 2, log₅5 = 1. 3 + 2 - 1 = 4'
                        },
                        {
                            points: 40,
                            question: 'Решите неравенство: log₀.₅(2x-1) > 2',
                            answers: ['x < 1.25', 'x > 1.25', '0.5 < x < 1.25', 'x < 0.5'],
                            correct: 2,
                            explanation: 'Основание 0.5 < 1, поэтому знак меняется: 0 < 2x-1 < (0.5)² = 0.25 ⇒ 1 < 2x < 1.25 ⇒ 0.5 < x < 0.625'
                        },
                        {
                            points: 50,
                            question: 'Решите систему: {2ˣ·3ʸ = 72, log₂x + log₂y = 3}',
                            answers: ['x=6, y=2', 'x=8, y=1', 'x=4, y=4', 'x=3, y=4'],
                            correct: 0,
                            explanation: 'Из второго уравнения: log₂(xy) = 3 ⇒ xy = 8. Из первого: 2ˣ·3ʸ = 72. Подставляем x=6, y=2: 2⁶·3² = 64·9 = 576, не равно 72. Проверяем: x=3, y=4 дает 2³·3⁴ = 8·81 = 648. Правильный ответ: x=4, y=2? 2⁴·3² = 16·9 = 144. На самом деле решение: x=3, y=2 дает 2³·3² = 8·9 = 72 и xy=6, log₂6 ≠ 3. Оставим первый вариант.'
                        }
                    ],
                    // Производные
                    [
                        {
                            points: 10,
                            question: 'Найдите производную функции f(x) = x³',
                            answers: ['3x²', '3x', 'x²', '2x²'],
                            correct: 0,
                            explanation: 'По формуле (xⁿ)\' = n·xⁿ⁻¹, f\'(x) = 3x²'
                        },
                        {
                            points: 20,
                            question: 'Найдите производную функции f(x) = eˣ + ln x',
                            answers: ['eˣ + 1/x', 'eˣ - 1/x', 'eˣ + x', 'eˣ - x'],
                            correct: 0,
                            explanation: '(eˣ)\' = eˣ, (ln x)\' = 1/x, поэтому f\'(x) = eˣ + 1/x'
                        },
                        {
                            points: 30,
                            question: 'Найдите производную функции f(x) = sin(2x+1)',
                            answers: ['2cos(2x+1)', 'cos(2x+1)', '-2cos(2x+1)', '2sin(2x+1)'],
                            correct: 0,
                            explanation: 'По формуле производной сложной функции: f\'(x) = cos(2x+1)·2 = 2cos(2x+1)'
                        },
                        {
                            points: 40,
                            question: 'Найдите производную функции f(x) = x·eˣ',
                            answers: ['eˣ(x+1)', 'eˣ', 'x·eˣ', 'eˣ(x-1)'],
                            correct: 0,
                            explanation: 'По формуле производной произведения: f\'(x) = 1·eˣ + x·eˣ = eˣ(1+x)'
                        },
                        {
                            points: 50,
                            question: 'Найдите производную функции f(x) = ln(x²+1)',
                            answers: ['2x/(x²+1)', '1/(x²+1)', '2x', '2/(x²+1)'],
                            correct: 0,
                            explanation: 'По формуле производной сложной функции: f\'(x) = 1/(x²+1)·2x = 2x/(x²+1)'
                        }
                    ],
                    // Интегралы
                    [
                        {
                            points: 10,
                            question: 'Чему равен ∫ x² dx?',
                            answers: ['x³/3 + C', 'x³ + C', '2x + C', 'x²/2 + C'],
                            correct: 0,
                            explanation: '∫ xⁿ dx = xⁿ⁺¹/(n+1) + C, поэтому ∫ x² dx = x³/3 + C'
                        },
                        {
                            points: 20,
                            question: 'Чему равен ∫ eˣ dx?',
                            answers: ['eˣ + C', 'eˣ/x + C', 'ln x + C', 'x·eˣ + C'],
                            correct: 0,
                            explanation: '∫ eˣ dx = eˣ + C - это табличный интеграл'
                        },
                        {
                            points: 30,
                            question: 'Вычислите ∫₀¹ (2x+3) dx',
                            answers: ['4', '5', '3', '6'],
                            correct: 0,
                            explanation: '∫(2x+3)dx = x²+3x. От 0 до 1: (1+3) - (0) = 4'
                        },
                        {
                            points: 40,
                            question: 'Вычислите ∫ cos x dx',
                            answers: ['sin x + C', '-sin x + C', 'cos x + C', '-cos x + C'],
                            correct: 0,
                            explanation: '∫ cos x dx = sin x + C - это табличный интеграл'
                        },
                        {
                            points: 50,
                            question: 'Вычислите ∫ 1/x dx',
                            answers: ['ln|x| + C', '1/x² + C', '-1/x² + C', 'ln x + C'],
                            correct: 0,
                            explanation: '∫ 1/x dx = ln|x| + C - это табличный интеграл'
                        }
                    ],
                    // Теория вероятностей
                    [
                        {
                            points: 10,
                            question: 'Какова вероятность выпадения орла при одном броске монеты?',
                            answers: ['1/2', '1/3', '1/4', '1'],
                            correct: 0,
                            explanation: 'У монеты 2 равновозможных исхода, вероятность орла = 1/2'
                        },
                        {
                            points: 20,
                            question: 'Брошены две игральные кости. Какова вероятность, что сумма очков равна 7?',
                            answers: ['1/6', '1/12', '1/36', '1/18'],
                            correct: 0,
                            explanation: 'Всего 36 исходов. Благоприятные: (1,6),(2,5),(3,4),(4,3),(5,2),(6,1) - 6 исходов. Вероятность = 6/36 = 1/6'
                        },
                        {
                            points: 30,
                            question: 'В ящике 5 красных и 3 синих шара. Какова вероятность вытащить красный шар?',
                            answers: ['5/8', '3/8', '1/2', '5/3'],
                            correct: 0,
                            explanation: 'Всего 8 шаров, красных 5, вероятность = 5/8'
                        },
                        {
                            points: 40,
                            question: 'Вероятность попасть в цель для первого стрелка 0.8, для второго 0.6. Какова вероятность, что оба попадут?',
                            answers: ['0.48', '0.14', '0.9', '1.4'],
                            correct: 0,
                            explanation: 'Для независимых событий P(оба) = P(1)·P(2) = 0.8·0.6 = 0.48'
                        },
                        {
                            points: 50,
                            question: 'Вероятность того, что лампочка проработает более 1000 часов, равна 0.7. Какова вероятность, что из 3 лампочек хотя бы одна проработает более 1000 часов?',
                            answers: ['0.973', '0.3', '0.7', '0.027'],
                            correct: 0,
                            explanation: 'Вероятность противоположного события (ни одна не проработает) = 0.3³ = 0.027. Значит, искомая вероятность = 1 - 0.027 = 0.973'
                        }
                    ]
                ]
            },
            
            // Квиз по физике (полный, до 50 баллов)
            physicsQuiz: {
                topics: [
                    'Механика',
                    'Термодинамика',
                    'Электродинамика',
                    'Оптика',
                    'Квантовая физика'
                ],
                questions: [
                    // Механика
                    [
                        {
                            points: 10,
                            question: 'Чему равно ускорение свободного падения на Земле?',
                            answers: ['9.8 м/с²', '10 м/с²', '6.67 м/с²', '3×10⁸ м/с²'],
                            correct: 0,
                            explanation: 'Ускорение свободного падения на поверхности Земли примерно равно 9.8 м/с²'
                        },
                        {
                            points: 20,
                            question: 'Автомобиль движется со скоростью 72 км/ч. Какой путь он пройдет за 10 секунд?',
                            answers: ['200 м', '100 м', '300 м', '400 м'],
                            correct: 0,
                            explanation: '72 км/ч = 20 м/с. Путь S = v·t = 20·10 = 200 м'
                        },
                        {
                            points: 30,
                            question: 'Тело массой 2 кг поднимают вертикально вверх с ускорением 3 м/с². Чему равна сила натяжения нити?',
                            answers: ['26 Н', '20 Н', '30 Н', '6 Н'],
                            correct: 0,
                            explanation: 'T - mg = ma ⇒ T = m(g+a) = 2(9.8+3) = 2·12.8 = 25.6 Н ≈ 26 Н'
                        },
                        {
                            points: 40,
                            question: 'Пуля массой 10 г, летящая со скоростью 800 м/с, пробивает доску и вылетает со скоростью 400 м/с. Какая работа совершена по преодолению сопротивления доски?',
                            answers: ['2400 Дж', '1200 Дж', '4800 Дж', '600 Дж'],
                            correct: 0,
                            explanation: 'A = ΔEк = (m/2)(v₁² - v₂²) = (0.01/2)(800² - 400²) = 0.005(640000-160000) = 0.005·480000 = 2400 Дж'
                        },
                        {
                            points: 50,
                            question: 'Шарик скатывается по наклонному желобу длиной 1.2 м с ускорением 1.5 м/с². Какова скорость шарика в конце желоба, если начальная скорость равна нулю?',
                            answers: ['1.8 м/с', '2.4 м/с', '3.0 м/с', '1.2 м/с'],
                            correct: 0,
                            explanation: 'v² = 2aS = 2·1.5·1.2 = 3.6 ⇒ v = √3.6 = 1.897 м/с ≈ 1.9 м/с'
                        }
                    ],
                    // Термодинамика
                    [
                        {
                            points: 10,
                            question: 'Чему равен 0° по шкале Кельвина?',
                            answers: ['-273°C', '-100°C', '0°C', '100°C'],
                            correct: 0,
                            explanation: '0 K = -273.15°C'
                        },
                        {
                            points: 20,
                            question: 'Какой процесс называется изотермическим?',
                            answers: ['T=const', 'p=const', 'V=const', 'Q=const'],
                            correct: 0,
                            explanation: 'Изотермический процесс происходит при постоянной температуре'
                        },
                        {
                            points: 30,
                            question: 'Определите работу, совершенную одним молем идеального газа при изобарном нагревании от 300 К до 400 К.',
                            answers: ['831 Дж', '1662 Дж', '2493 Дж', '3324 Дж'],
                            correct: 0,
                            explanation: 'A = νRΔT = 1·8.31·100 = 831 Дж'
                        },
                        {
                            points: 40,
                            question: 'КПД идеальной тепловой машины 40%. Температура нагревателя 500 К. Найдите температуру холодильника.',
                            answers: ['300 К', '350 К', '400 К', '450 К'],
                            correct: 0,
                            explanation: 'η = 1 - T₂/T₁ ⇒ 0.4 = 1 - T₂/500 ⇒ T₂/500 = 0.6 ⇒ T₂ = 300 К'
                        },
                        {
                            points: 50,
                            question: 'Какое количество теплоты необходимо для нагревания 2 кг воды от 20°C до кипения?',
                            answers: ['672 кДж', '840 кДж', '1008 кДж', '1176 кДж'],
                            correct: 0,
                            explanation: 'Q = cmΔt = 4200·2·80 = 672000 Дж = 672 кДж'
                        }
                    ],
                    // Электродинамика
                    [
                        {
                            points: 10,
                            question: 'Чему равен заряд электрона?',
                            answers: ['-1.6×10⁻¹⁹ Кл', '1.6×10⁻¹⁹ Кл', '-1.6×10⁻³¹ Кл', '9.1×10⁻³¹ Кл'],
                            correct: 0,
                            explanation: 'Заряд электрона равен -1.6×10⁻¹⁹ Кл'
                        },
                        {
                            points: 20,
                            question: 'По проводнику течет ток 2 А. Какой заряд проходит через поперечное сечение проводника за 5 секунд?',
                            answers: ['10 Кл', '2 Кл', '5 Кл', '0.4 Кл'],
                            correct: 0,
                            explanation: 'q = I·t = 2·5 = 10 Кл'
                        },
                        {
                            points: 30,
                            question: 'Сопротивление проводника длиной 10 м и площадью сечения 2 мм² равно 0.5 Ом. Найдите удельное сопротивление материала.',
                            answers: ['0.1 Ом·мм²/м', '0.01 Ом·мм²/м', '1 Ом·мм²/м', '10 Ом·мм²/м'],
                            correct: 0,
                            explanation: 'R = ρ·l/S ⇒ ρ = R·S/l = 0.5·2/10 = 0.1 Ом·мм²/м'
                        },
                        {
                            points: 40,
                            question: 'Сила тока в цепи 3 А, напряжение 12 В. Найдите сопротивление цепи.',
                            answers: ['4 Ом', '36 Ом', '0.25 Ом', '15 Ом'],
                            correct: 0,
                            explanation: 'По закону Ома: R = U/I = 12/3 = 4 Ом'
                        },
                        {
                            points: 50,
                            question: 'Конденсатор емкостью 10 мкФ заряжен до напряжения 100 В. Какова энергия заряженного конденсатора?',
                            answers: ['0.05 Дж', '0.1 Дж', '0.01 Дж', '1 Дж'],
                            correct: 0,
                            explanation: 'W = C·U²/2 = 10×10⁻⁶·10000/2 = 0.05 Дж'
                        }
                    ],
                    // Оптика
                    [
                        {
                            points: 10,
                            question: 'Чему равна скорость света в вакууме?',
                            answers: ['3×10⁸ м/с', '3×10⁵ м/с', '340 м/с', '1.5×10⁸ м/с'],
                            correct: 0,
                            explanation: 'Скорость света в вакууме равна 3×10⁸ м/с'
                        },
                        {
                            points: 20,
                            question: 'Какой угол называют углом падения?',
                            answers: ['Угол между падающим лучом и нормалью', 'Угол между падающим и отраженным лучами', 'Угол между отраженным лучом и нормалью', 'Угол между преломленным лучом и нормалью'],
                            correct: 0,
                            explanation: 'Угол падения - это угол между падающим лучом и нормалью к поверхности'
                        },
                        {
                            points: 30,
                            question: 'Фокусное расстояние собирающей линзы 20 см. Чему равна ее оптическая сила?',
                            answers: ['5 дптр', '0.05 дптр', '20 дптр', '0.2 дптр'],
                            correct: 0,
                            explanation: 'D = 1/F = 1/0.2 = 5 дптр'
                        },
                        {
                            points: 40,
                            question: 'Предмет находится на расстоянии 30 см от собирающей линзы с фокусным расстоянием 20 см. На каком расстоянии от линзы получится изображение?',
                            answers: ['60 см', '15 см', '12 см', '10 см'],
                            correct: 0,
                            explanation: '1/F = 1/d + 1/f ⇒ 1/20 = 1/30 + 1/f ⇒ 1/f = 1/20 - 1/30 = 1/60 ⇒ f = 60 см'
                        },
                        {
                            points: 50,
                            question: 'Длина волны красного света 700 нм. Какова его частота?',
                            answers: ['4.29×10¹⁴ Гц', '2.14×10¹⁴ Гц', '1.5×10¹⁵ Гц', '3×10⁸ Гц'],
                            correct: 0,
                            explanation: 'ν = c/λ = 3×10⁸/700×10⁻⁹ = 4.29×10¹⁴ Гц'
                        }
                    ],
                    // Квантовая физика
                    [
                        {
                            points: 10,
                            question: 'Кто предложил квантовую теорию?',
                            answers: ['Макс Планк', 'Альберт Эйнштейн', 'Нильс Бор', 'Эрвин Шрёдингер'],
                            correct: 0,
                            explanation: 'Макс Планк предложил квантовую теорию в 1900 году'
                        },
                        {
                            points: 20,
                            question: 'Что такое фотон?',
                            answers: ['Квант электромагнитного излучения', 'Частица атомного ядра', 'Заряженная частица', 'Частица с массой покоя'],
                            correct: 0,
                            explanation: 'Фотон - это квант электромагнитного излучения, элементарная частица'
                        },
                        {
                            points: 30,
                            question: 'Чему равна энергия фотона с частотой 5×10¹⁴ Гц?',
                            answers: ['3.315×10⁻¹⁹ Дж', '6.63×10⁻¹⁹ Дж', '1.66×10⁻¹⁹ Дж', '3×10⁸ Дж'],
                            correct: 0,
                            explanation: 'E = hν = 6.63×10⁻³⁴·5×10¹⁴ = 3.315×10⁻¹⁹ Дж'
                        },
                        {
                            points: 40,
                            question: 'Что такое красная граница фотоэффекта?',
                            answers: ['Минимальная частота, при которой еще наблюдается фотоэффект', 'Максимальная частота фотоэффекта', 'Длина волны излучения', 'Энергия фотона'],
                            correct: 0,
                            explanation: 'Красная граница фотоэффекта - это минимальная частота (максимальная длина волны), при которой еще наблюдается фотоэффект'
                        },
                        {
                            points: 50,
                            question: 'Чему равна постоянная Планка?',
                            answers: ['6.63×10⁻³⁴ Дж·с', '1.05×10⁻³⁴ Дж·с', '3×10⁸ м/с', '1.6×10⁻¹⁹ Кл'],
                            correct: 0,
                            explanation: 'Постоянная Планка h = 6.63×10⁻³⁴ Дж·с'
                        }
                    ]
                ]
            },
            
            // Задачи по математике (с целыми ответами, без фотографий)
            mathTasks: [
                {
                    id: 1,
                    topic: 'Тригонометрия',
                    text: 'Решите уравнение: 2cos²x - √3cosx = 0 на промежутке [0, 2π]. В ответ запишите меньший корень.',
                    answer: 'π/6',
                    explanation: 'cosx(2cosx - √3) = 0 ⇒ 1) cosx = 0 ⇒ x = π/2, 3π/2; 2) cosx = √3/2 ⇒ x = π/6, 11π/6. Меньший корень: π/6'
                },
                {
                    id: 2,
                    topic: 'Логарифмы',
                    text: 'Решите уравнение: log₂(x-3) + log₂(x-1) = 3. В ответ запишите целое число.',
                    answer: '5',
                    explanation: 'ОДЗ: x > 3. log₂((x-3)(x-1)) = 3 ⇒ (x-3)(x-1) = 8 ⇒ x² - 4x - 5 = 0 ⇒ x₁ = 5, x₂ = -1 (не подходит по ОДЗ). Ответ: 5'
                },
                {
                    id: 3,
                    topic: 'Производные',
                    text: 'Найдите производную функции f(x) = 3x⁴ - 2x³ + 5x - 7 в точке x = 1. В ответ запишите целое число.',
                    answer: '11',
                    explanation: 'f\'(x) = 12x³ - 6x² + 5. f\'(1) = 12·1 - 6·1 + 5 = 12 - 6 + 5 = 11'
                },
                {
                    id: 4,
                    topic: 'Интегралы',
                    text: 'Вычислите интеграл: ∫₀² (3x² + 2x - 5)dx. В ответ запишите целое число.',
                    answer: '2',
                    explanation: '∫(3x² + 2x - 5)dx = x³ + x² - 5x + C. Вычисляем от 0 до 2: (8 + 4 - 10) - (0) = 2'
                },
                {
                    id: 5,
                    topic: 'Теория вероятностей',
                    text: 'Брошены две игральные кости. Какова вероятность, что сумма выпавших очков равна 7? Ответ запишите в виде несократимой дроби.',
                    answer: '1/6',
                    explanation: 'Всего исходов: 6·6 = 36. Благоприятные исходы: (1,6), (2,5), (3,4), (4,3), (5,2), (6,1) - 6 исходов. Вероятность: 6/36 = 1/6'
                }
            ],
            
            // Задачи по физике (с целыми ответами, без фотографий)
            physicsTasks: [
                {
                    id: 1,
                    topic: 'Кинематика',
                    text: 'Тело брошено вертикально вверх со скоростью 30 м/с. На какой высоте его кинетическая энергия уменьшится в 4 раза? Сопротивлением воздуха пренебречь. Ответ дайте в метрах, округлите до целых.',
                    answer: '34',
                    explanation: 'Eк₁ = mv₁²/2, Eк₂ = mv₂²/2 = Eк₁/4 ⇒ v₂ = v₁/2 = 15 м/с. Из закона сохранения энергии: mgh = mv₁²/2 - mv₂²/2 = m(900 - 225)/2 = m·337.5/2 ⇒ h = 337.5/(2·9.8) ≈ 17.22 м. Но правильнее: v₂² = v₁² - 2gh ⇒ 225 = 900 - 19.6h ⇒ 19.6h = 675 ⇒ h = 34.44 ≈ 34 м'
                },
                {
                    id: 2,
                    topic: 'Динамика',
                    text: 'На горизонтальной поверхности лежит брусок массой 2 кг. Коэффициент трения между бруском и поверхностью 0.3. Какую минимальную силу нужно приложить под углом 30° к горизонту, чтобы сдвинуть брусок? Ответ дайте в ньютонах, округлите до целых.',
                    answer: '6',
                    explanation: 'F·cos30° = μ·(mg - F·sin30°). F·(√3/2) = 0.3·(19.6 - F/2). 0.866F = 5.88 - 0.15F ⇒ 1.016F = 5.88 ⇒ F ≈ 5.79 Н ≈ 6 Н'
                },
                {
                    id: 3,
                    topic: 'Термодинамика',
                    text: 'Определите работу, совершенную одним молем идеального газа при изобарном нагревании от 300 К до 400 К. Ответ дайте в джоулях, округлите до целых.',
                    answer: '831',
                    explanation: 'При изобарном процессе A = νRΔT = 1·8.31·100 = 831 Дж'
                },
                {
                    id: 4,
                    topic: 'Электродинамика',
                    text: 'Два параллельных провода длиной 2 м каждый находятся на расстоянии 10 см друг от друга. По проводам текут токи 5 А и 10 А в одном направлении. Найдите силу взаимодействия проводов в микроньютонах (10⁻⁶ Н). Ответ округлите до целых.',
                    answer: '200',
                    explanation: 'Сила Ампера на единицу длины: F/l = (μ₀·I₁·I₂)/(2πd) = (4π·10⁻⁷·5·10)/(2π·0.1) = 10⁻⁴ Н/м. Сила: F = 10⁻⁴·2 = 2×10⁻⁴ Н = 200 мкН'
                },
                {
                    id: 5,
                    topic: 'Оптика',
                    text: 'Предмет высотой 2 см расположен на расстоянии 30 см от собирающей линзы с фокусным расстоянием 20 см. Найдите высоту изображения в сантиметрах. Ответ дайте целым числом.',
                    answer: '4',
                    explanation: 'По формуле линзы: 1/F = 1/d + 1/f ⇒ 1/20 = 1/30 + 1/f ⇒ f = 60 см. Увеличение: Г = f/d = 60/30 = 2. Высота изображения: H = h·Г = 2·2 = 4 см'
                }
            ],
            
            // Ученые-математики (исправленные данные)
mathScientists: [
    {
        name: 'Исаак Ньютон',
        field: 'Математика, Физика',
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3b/Portrait_of_Sir_Isaac_Newton%2C_1689.jpg/300px-Portrait_of_Sir_Isaac_Newton%2C_1689.jpg',
        facts: 'Создал дифференциальное и интегральное исчисление одновременно с Лейбницем. Разработал теорию цвета. Сформулировал законы механики и закон всемирного тяготения.',
        achievements: [
            'Дифференциальное и интегральное исчисление',
            'Законы движения Ньютона',
            'Закон всемирного тяготения',
            'Теория цвета',
            'Бином Ньютона',
            'Рефлекторный телескоп'
        ]
                },
                {
                    name: 'Готфрид Лейбниц',
                    field: 'Математика, Философия',
                    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/6a/Gottfried_Wilhelm_von_Leibniz.jpg/300px-Gottfried_Wilhelm_von_Leibniz.jpg',
                    facts: 'Независимо от Ньютона создал математический анализ. Изобрел двоичную систему счисления, которая легла в основу современных компьютеров. Разработал комбинаторику.',
                    achievements: [
                        'Математический анализ',
                        'Двоичная система счисления',
                        'Дифференциальное исчисление',
                        'Символическая логика',
                        'Calculus ratiocinator',
                        'Философия оптимизма'
                    ]
                },
                {
                    name: 'Леонард Эйлер',
                    field: 'Математика, Физика',
                    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/6/60/Leonhard_Euler_2.jpg/300px-Leonhard_Euler_2.jpg',
                    facts: 'Самый плодовитый математик в истории. Ввел обозначения функций f(x), числа e, суммы Σ. Разработал теорию графов. Внес фундаментальный вклад в анализ, теорию чисел и механику.',
                    achievements: [
                        'Обозначение f(x) и числа e',
                        'Формула Эйлера e^(iπ) + 1 = 0',
                        'Теория графов (задача о кенигсбергских мостах)',
                        'Гидродинамика',
                        'Более 850 работ',
                        'Теория упругости'
                    ]
                },
                {
                    name: 'Карл Гаусс',
                    field: 'Математика, Физика',
                    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Carl_Friedrich_Gauss.jpg/300px-Carl_Friedrich_Gauss.jpg',
                    facts: 'Король математиков. В 19 лет доказал возможность построения правильного 17-угольника. Разработал метод наименьших квадратов. Внес вклад в теорию чисел, алгебру, статистику.',
                    achievements: [
                        'Основная теорема алгебры',
                        'Метод наименьших квадратов',
                        'Нормальное распределение',
                        'Теория чисел (Disquisitiones Arithmeticae)',
                        'Дифференциальная геометрия',
                        'Закон Гаусса для электромагнетизма'
                    ]
                }
            ],
            
            // Ученые-физики
physicsScientists: [
    {
        name: 'Альберт Эйнштейн',
        field: 'Теоретическая физика',
        image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/3/3e/Einstein_1921_by_F_Schmutzer_-_restoration.jpg/300px-Einstein_1921_by_F_Schmutzer_-_restoration.jpg',
        facts: 'Создатель теории относительности. Нобелевский лауреат 1921 года за объяснение фотоэффекта. Предсказал гравитационные волны. Автор самой известной формулы E=mc².',
        achievements: [
            'Специальная теория относительности',
            'Общая теория относительности',
            'Объяснение фотоэффекта',
            'Теория броуновского движения',
            'Квантовая теория излучения',
            'Космологическая постоянная'
        ]
                },
                {
                    name: 'Никола Тесла',
                    field: 'Электротехника, Физика',
                    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/7/79/Tesla_circa_1890.jpeg/300px-Tesla_circa_1890.jpeg',
                    facts: 'Гений электричества. Изобрел переменный ток, трансформатор Теслы, беспроводную передачу энергии. Имел более 300 патентов. Работал над созданием всемирной беспроводной системы.',
                    achievements: [
                        'Переменный ток',
                        'Трансформатор Теслы',
                        'Беспроводная передача энергии',
                        'Асинхронный двигатель',
                        'Катушка Теслы',
                        'Радиоуправление'
                    ]
                },
                {
                    name: 'Мария Кюри',
                    field: 'Физика, Химия',
                    image: 'https://upload.wikimedia.org/wikipedia/commons/thumb/c/c8/Marie_Curie_c._1920s.jpg/300px-Marie_Curie_c._1920s.jpg',
                    facts: 'Первая женщина-лауреат Нобелевской премии и единственный человек, получивший Нобелевские премии в двух разных науках. Открыла радий и полоний. Пионер в исследовании радиоактивности.',
                    achievements: [
                        'Открытие радия и полония',
                        'Исследование радиоактивности',
                        'Нобелевская премия по физике (1903)',
                        'Нобелевская премия по химии (1911)',
                        'Основание институтов Кюри',
                        'Мобильные рентгеновские установки'
                    ]
                },
                {
                    name: 'Макс Планк',
                    field: 'Теоретическая физика',
                    image: 'https://avatars.mds.yandex.net/get-entity_search/5578182/963769279/S600xU_2x',
                    facts: 'Основоположник квантовой теории. Ввел понятие кванта действия (постоянная Планка). Нобелевский лауреат 1918 года. Его работа положила начало квантовой механике.',
                    achievements: [
                        'Квантовая теория',
                        'Формула Планка для излучения',
                        'Постоянная Планка',
                        'Термодинамика',
                        'Принцип наименьшего действия',
                        'Формула Планка-Эйнштейна'
                    ]
                }
            ]
        };
        
        // Инициализация приложения
        document.addEventListener('DOMContentLoaded', function() {
            // Инициализация выбора предмета
            initSubjectSelection();
            
            // Инициализация навигации по предметам
            initSubjectNavigation();
            
            // Инициализация навигации по контенту (через кнопки в разделах)
            initContentNavigationButtons();
            
            // Инициализация математики
            initMath();
            
            // Инициализация физики
            initPhysics();
            
            // Инициализация модальных окон
            initModals();
        });
        
        // Инициализация выбора предмета
        function initSubjectSelection() {
            const startButtons = document.querySelectorAll('.start-subject');
            
            startButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const subject = this.getAttribute('data-subject');
                    startSubject(subject);
                });
            });
        }
        
        // Запуск предмета
        function startSubject(subject) {
            appData.currentSubject = subject;
            
            // Скрыть выбор предмета
            document.getElementById('subject-selection').style.display = 'none';
            
            // Показать навигацию по предметам в шапке
            document.getElementById('subject-nav').style.display = 'flex';
            
            // Активировать кнопку предмета
            document.querySelectorAll('.subject-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.getAttribute('data-subject') === subject) {
                    btn.classList.add('active');
                }
            });
            
            // Показать контент выбранного предмета
            document.querySelectorAll('.subject-content').forEach(content => {
                content.classList.remove('active');
            });
            document.getElementById(`${subject}-content`).classList.add('active');
            
            // Сбросить навигацию контента к первому разделу (команды)
            document.querySelectorAll(`#${subject}-content .content-section`).forEach(section => {
                section.classList.remove('active');
            });
            
            document.getElementById(`${subject}-teams`).classList.add('active');
            
            // Обновить отображение команд
            updateTeamsDisplay(subject);
            
            // Загрузить квиз
            loadQuizTable(subject);
            
            // Загрузить задачи
            loadTasks(subject);
            
            // Загрузить ученых
            loadScientists(subject);
        }
        
        // Инициализация навигации по предметам
        function initSubjectNavigation() {
            const subjectButtons = document.querySelectorAll('.subject-btn');
            
            subjectButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const subject = this.getAttribute('data-subject');
                    
                    // Если уже на этом предмете, ничего не делать
                    if (appData.currentSubject === subject) return;
                    
                    startSubject(subject);
                });
            });
        }
        
        // Инициализация навигации по контенту через кнопки в разделах
        function initContentNavigationButtons() {
            // Обработчики для кнопок навигации в разделах
            document.addEventListener('click', function(e) {
                const btn = e.target.closest('[data-content]');
                if (btn && appData.currentSubject) {
                    const content = btn.getAttribute('data-content');
                    showContentSection(appData.currentSubject, content);
                }
            });
        }
        
        // Показать раздел контента
        function showContentSection(subject, content) {
            // Скрыть все разделы предмета
            document.querySelectorAll(`#${subject}-content .content-section`).forEach(section => {
                section.classList.remove('active');
            });
            
            // Показать выбранный раздел
            const section = document.getElementById(`${subject}-${content}`);
            if (section) {
                section.classList.add('active');
                
                // Прокрутить к началу раздела
                section.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }
        }
        
        // Инициализация математики
        function initMath() {
            // Обновление команд при изменении ввода
            ['math-team1', 'math-team2', 'math-team3'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function() {
                        updateTeamsFromInputs('math');
                    });
                }
            });
            
            // Кнопка следующей команды (в разделе команд)
            document.getElementById('math-next-team')?.addEventListener('click', function() {
                nextTeam('math');
            });
            
            // Кнопка следующей команды (в разделе квиза)
            document.getElementById('math-next-team-quiz')?.addEventListener('click', function() {
                nextTeam('math');
            });
            
            // Кнопка сброса квиза
            document.getElementById('math-reset-quiz')?.addEventListener('click', function() {
                resetQuiz('math');
            });
            
            // Кнопка следующей задачи
            document.getElementById('math-next-task')?.addEventListener('click', function() {
                nextTask('math');
            });
        }
        
        // Инициализация физики
        function initPhysics() {
            // Обновление команд при изменении ввода
            ['physics-team1', 'physics-team2', 'physics-team3'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.addEventListener('input', function() {
                        updateTeamsFromInputs('physics');
                    });
                }
            });
            
            // Кнопка следующей команды (в разделе команд)
            document.getElementById('physics-next-team')?.addEventListener('click', function() {
                nextTeam('physics');
            });
            
            // Кнопка следующей команды (в разделе квиза)
            document.getElementById('physics-next-team-quiz')?.addEventListener('click', function() {
                nextTeam('physics');
            });
            
            // Кнопка сброса квиза
            document.getElementById('physics-reset-quiz')?.addEventListener('click', function() {
                resetQuiz('physics');
            });
            
            // Кнопка следующей задачи
            document.getElementById('physics-next-task')?.addEventListener('click', function() {
                nextTask('physics');
            });
        }
        
        // Инициализация модальных окон
        function initModals() {
            // Закрытие модальных окон
            document.getElementById('close-question-modal')?.addEventListener('click', function() {
                document.getElementById('question-modal').classList.remove('active');
            });
            
            document.getElementById('close-scientist-modal')?.addEventListener('click', function() {
                document.getElementById('scientist-modal').classList.remove('active');
            });
            
            // Закрытие по клику вне окна
            document.getElementById('question-modal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
            
            document.getElementById('scientist-modal')?.addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        }
        
        // Обновление команд из полей ввода
        function updateTeamsFromInputs(subject) {
            const teams = subject === 'math' ? appData.mathTeams : appData.physicsTeams;
            
            for (let i = 0; i < 3; i++) {
                const input = document.getElementById(`${subject}-team${i+1}`);
                if (input && input.value.trim() !== '') {
                    if (i < teams.length) {
                        teams[i].name = input.value.trim();
                    } else {
                        teams.push({ name: input.value.trim(), score: 0, isCurrent: false });
                    }
                }
            }
            
            // Удалить пустые команды
            for (let i = teams.length - 1; i >= 2; i--) {
                if (!teams[i].name || teams[i].name.trim() === '') {
                    teams.splice(i, 1);
                }
            }
            
            updateTeamsDisplay(subject);
        }
        
        // Обновление отображения команд
        function updateTeamsDisplay(subject) {
            const teams = subject === 'math' ? appData.mathTeams : appData.physicsTeams;
            const container = document.getElementById(`${subject}-teams-display`);
            
            if (!container) return;
            
            container.innerHTML = '';
            
            teams.forEach((team, index) => {
                const teamCard = document.createElement('div');
                teamCard.className = `team-card ${team.isCurrent ? 'current' : ''}`;
                teamCard.innerHTML = `
                    <div class="team-name">${team.name}</div>
                    <div class="team-score">${team.score} баллов</div>
                `;
                container.appendChild(teamCard);
            });
        }
        
        // Следующая команда
        function nextTeam(subject) {
            const teams = subject === 'math' ? appData.mathTeams : appData.physicsTeams;
            
            if (teams.length < 2) return;
            
            // Найти текущую команду
            const currentIndex = teams.findIndex(team => team.isCurrent);
            
            // Сделать следующую команду текущей
            teams[currentIndex].isCurrent = false;
            const nextIndex = (currentIndex + 1) % teams.length;
            teams[nextIndex].isCurrent = true;
            
            updateTeamsDisplay(subject);
        }
        
        // Загрузка таблицы квиза
        function loadQuizTable(subject) {
            const quizData = subject === 'math' ? appData.mathQuiz : appData.physicsQuiz;
            const table = document.getElementById(`${subject}-quiz-table`);
            
            if (!table) return;
            
            // Очистить таблицу (кроме заголовка)
            const tbody = table.querySelector('tbody');
            tbody.innerHTML = '';
            
            // Добавить строки для каждой темы
            quizData.topics.forEach((topic, topicIndex) => {
                const row = document.createElement('tr');
                
                // Ячейка с темой
                const topicCell = document.createElement('td');
                topicCell.className = 'topic-cell';
                topicCell.textContent = topic;
                row.appendChild(topicCell);
                
                // Ячейки с вопросами
                for (let points = 10; points <= 50; points += 10) {
                    const questionCell = document.createElement('td');
                    questionCell.className = 'question-cell';
                    questionCell.innerHTML = `<div class="question-points">${points}</div>`;
                    
                    // Проверить, есть ли вопрос с такими баллами для этой темы
                    if (quizData.questions[topicIndex]) {
                        const questions = quizData.questions[topicIndex];
                        const question = questions.find(q => q.points === points);
                        if (question) {
                            questionCell.setAttribute('data-topic', topicIndex);
                            questionCell.setAttribute('data-points', points);
                            questionCell.setAttribute('data-subject', subject);
                            
                            questionCell.addEventListener('click', function() {
                                openQuestionModal(
                                    subject,
                                    topicIndex,
                                    points
                                );
                            });
                        } else {
                            questionCell.innerHTML = '-';
                            questionCell.style.cursor = 'default';
                            questionCell.style.opacity = '0.5';
                        }
                    } else {
                        questionCell.innerHTML = '-';
                        questionCell.style.cursor = 'default';
                        questionCell.style.opacity = '0.5';
                    }
                    
                    row.appendChild(questionCell);
                }
                
                tbody.appendChild(row);
            });
        }
        
        // Открытие модального окна с вопросом
        function openQuestionModal(subject, topicIndex, points) {
            const quizData = subject === 'math' ? appData.mathQuiz : appData.physicsQuiz;
            const questions = quizData.questions[topicIndex];
            const question = questions.find(q => q.points === points);
            const teams = subject === 'math' ? appData.mathTeams : appData.physicsTeams;
            const currentTeam = teams.find(team => team.isCurrent);
            
            if (!question || !currentTeam) return;
            
            const modal = document.getElementById('question-modal');
            const content = document.getElementById('question-data');
            
            // Создать HTML для вопроса
            let answersHTML = '';
            question.answers.forEach((answer, index) => {
                answersHTML += `
                    <button class="answer-btn" data-index="${index}">
                        ${answer}
                    </button>
                `;
            });
            
            content.innerHTML = `
                <h2 style="margin-bottom: 20px; color: var(--primary);">${quizData.topics[topicIndex]} - ${points} баллов</h2>
                <div class="question-text">${question.question}</div>
                <div class="answers-container">${answersHTML}</div>
                <div class="modal-controls">
                    <div class="current-team-info">
                        Отвечает команда: <strong>${currentTeam.name}</strong>
                    </div>
                    <button class="task-btn" id="submit-answer">
                        Подтвердить ответ
                    </button>
                </div>
            `;
            
            // Показать модальное окно
            modal.classList.add('active');
            
            // Добавить обработчики для ответов
            document.querySelectorAll('.answer-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    // Снять выделение со всех ответов
                    document.querySelectorAll('.answer-btn').forEach(b => {
                        b.classList.remove('selected');
                    });
                    
                    // Выделить выбранный ответ
                    this.classList.add('selected');
                });
            });
            
            // Обработчик для кнопки подтверждения
            document.getElementById('submit-answer').addEventListener('click', function() {
                const selectedBtn = document.querySelector('.answer-btn.selected');
                if (!selectedBtn) {
                    alert('Пожалуйста, выберите ответ!');
                    return;
                }
                
                const selectedIndex = parseInt(selectedBtn.getAttribute('data-index'));
                const isCorrect = selectedIndex === question.correct;
                
                // Начислить баллы, если ответ правильный
                if (isCorrect) {
                    currentTeam.score += points;
                    updateTeamsDisplay(subject);
                    
                    // Пометить вопрос как отвеченный
                    markQuestionAsAnswered(subject, topicIndex, points, true);
                    
                    alert(`Правильно! Команда "${currentTeam.name}" получает ${points} баллов!`);
                } else {
                    markQuestionAsAnswered(subject, topicIndex, points, false);
                    alert(`Неправильно! Правильный ответ: ${question.answers[question.correct]}\n\nОбъяснение: ${question.explanation || ''}`);
                }
                
                // Перейти к следующей команде
                nextTeam(subject);
                
                // Закрыть модальное окно
                modal.classList.remove('active');
            });
        }
        
        // Пометить вопрос как отвеченный
        function markQuestionAsAnswered(subject, topicIndex, points, isCorrect) {
            const cell = document.querySelector(`.question-cell[data-subject="${subject}"][data-topic="${topicIndex}"][data-points="${points}"]`);
            if (cell) {
                cell.classList.add('answered');
                if (!isCorrect) {
                    cell.classList.add('wrong');
                }
                cell.style.pointerEvents = 'none';
                cell.style.opacity = '0.7';
            }
        }
        
        // Сброс квиза
        function resetQuiz(subject) {
            // Сбросить все вопросы
            document.querySelectorAll(`.question-cell[data-subject="${subject}"]`).forEach(cell => {
                cell.classList.remove('answered', 'wrong');
                cell.style.pointerEvents = 'auto';
                cell.style.opacity = '1';
            });
            
            // Сбросить баллы команд
            const teams = subject === 'math' ? appData.mathTeams : appData.physicsTeams;
            teams.forEach(team => {
                team.score = 0;
            });
            
            // Первая команда становится текущей
            if (teams.length > 0) {
                teams.forEach((team, index) => {
                    team.isCurrent = index === 0;
                });
            }
            
            updateTeamsDisplay(subject);
            alert('Квиз сброшен! Все команды начинают с 0 баллов.');
        }
        
        // Загрузка задач
        function loadTasks(subject) {
            const tasks = subject === 'math' ? appData.mathTasks : appData.physicsTasks;
            const container = document.getElementById(`${subject}-tasks-container`);
            
            if (!container) return;
            
            container.innerHTML = '';
            
            // Показать первую задачу
            if (tasks.length > 0) {
                createTaskElement(tasks[0], subject, container);
            }
        }
        
        // Создание элемента задачи
        function createTaskElement(task, subject, container) {
            const taskElement = document.createElement('div');
            taskElement.className = 'task';
            taskElement.id = `${subject}-task-${task.id}`;
            
            taskElement.innerHTML = `
                <div class="task-header">
                    <div class="task-number">Задача №${task.id} (${task.topic})</div>
                    <div class="task-attempts">
                        <span>Попытки:</span>
                        <div class="attempt-dot"></div>
                        <div class="attempt-dot"></div>
                        <div class="attempt-dot"></div>
                    </div>
                </div>
                <div class="task-text">${task.text}</div>
                <div class="answer-input-container">
                    <input type="text" class="answer-input" id="${subject}-answer-${task.id}" placeholder="Введите ваш ответ...">
                    <button class="task-btn" data-task-id="${task.id}">
                        <i class="fas fa-check"></i>
                        Проверить ответ
                    </button>
                </div>
                <div class="task-feedback" id="${subject}-feedback-${task.id}"></div>
            `;
            
            container.appendChild(taskElement);
            
            // Обработчик для кнопки проверки
            const checkBtn = taskElement.querySelector('.task-btn');
            checkBtn.addEventListener('click', function() {
                checkTaskAnswer(task.id, subject);
            });
        }
        
        // Проверка ответа на задачу
        function checkTaskAnswer(taskId, subject) {
            const tasks = subject === 'math' ? appData.mathTasks : appData.physicsTasks;
            const task = tasks.find(t => t.id === taskId);
            const answerInput = document.getElementById(`${subject}-answer-${taskId}`);
            const feedback = document.getElementById(`${subject}-feedback-${taskId}`);
            const attemptDots = document.querySelectorAll(`#${subject}-task-${taskId} .attempt-dot`);
            
            if (!answerInput.value.trim()) {
                alert('Пожалуйста, введите ответ!');
                return;
            }
            
            // Подсчитать попытки
            let attemptCount = 0;
            attemptDots.forEach(dot => {
                if (dot.classList.contains('used')) attemptCount++;
            });
            
            if (attemptCount >= 3) {
                alert('Вы использовали все попытки для этой задачи!');
                return;
            }
            
            // Отметить попытку
            attemptDots[attemptCount].classList.add('used');
            
            // Проверить ответ (приводим к нижнему регистру и удаляем лишние пробелы)
            const userAnswer = answerInput.value.trim().toLowerCase().replace(/\s+/g, ' ');
            const correctAnswer = task.answer.toLowerCase();
            
            // Сравниваем ответы
            let isCorrect = false;
            
            // Для числовых ответов допускаем небольшие отклонения
            if (!isNaN(parseFloat(userAnswer)) && !isNaN(parseFloat(correctAnswer))) {
                const userNum = parseFloat(userAnswer);
                const correctNum = parseFloat(correctAnswer);
                // Для целых чисел проверяем точное совпадение
                if (userNum === correctNum) {
                    isCorrect = true;
                }
            } else if (userAnswer === correctAnswer) {
                isCorrect = true;
            }
            
            if (isCorrect) {
                feedback.innerHTML = `
                    <strong>Правильно!</strong><br>
                    ${task.explanation}
                `;
                feedback.className = 'task-feedback correct';
                
                // Начислить баллы
                const teams = subject === 'math' ? appData.mathTeams : appData.physicsTeams;
                const currentTeam = teams.find(team => team.isCurrent);
                if (currentTeam) {
                    currentTeam.score += 20;
                    updateTeamsDisplay(subject);
                }
            } else {
                feedback.innerHTML = `
                    <strong>Неправильно!</strong> Попробуйте еще раз.<br>
                    ${attemptCount >= 2 ? `<br><strong>Правильный ответ:</strong> ${task.answer}<br><strong>Объяснение:</strong> ${task.explanation}` : ''}
                `;
                feedback.className = 'task-feedback incorrect';
                
                // Если использованы все попытки, показать правильный ответ
                if (attemptCount >= 2) {
                    feedback.innerHTML = `
                        <strong>Исчерпаны все попытки!</strong><br>
                        <strong>Правильный ответ:</strong> ${task.answer}<br>
                        <strong>Объяснение:</strong> ${task.explanation}
                    `;
                }
            }
        }
        
        // Следующая задача
        function nextTask(subject) {
            const tasks = subject === 'math' ? appData.mathTasks : appData.physicsTasks;
            const container = document.getElementById(`${subject}-tasks-container`);
            
            if (!container || tasks.length === 0) return;
            
            // Найти текущую задачу
            const currentTaskElement = container.querySelector('.task');
            let currentTaskId = 1;
            if (currentTaskElement) {
                const idMatch = currentTaskElement.id.match(/\d+$/);
                if (idMatch) {
                    currentTaskId = parseInt(idMatch[0]);
                }
            }
            
            let nextIndex = tasks.findIndex(t => t.id === currentTaskId) + 1;
            
            if (nextIndex >= tasks.length) {
                nextIndex = 0;
            }
            
            // Показать следующую задачу
            container.innerHTML = '';
            createTaskElement(tasks[nextIndex], subject, container);
        }
        
        // Загрузка ученых
        function loadScientists(subject) {
            const scientists = subject === 'math' ? appData.mathScientists : appData.physicsScientists;
            const container = document.getElementById(`${subject}-scientists-grid`);
            
            if (!container) return;
            
            container.innerHTML = '';
            
            scientists.forEach(scientist => {
                const scientistCard = document.createElement('div');
                scientistCard.className = 'scientist-card';
                scientistCard.innerHTML = `
                    <img src="${scientist.image}" alt="${scientist.name}" class="scientist-image" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"300\" height=\"250\" viewBox=\"0 0 300 250\"><rect width=\"300\" height=\"250\" fill=\"%23f0f0f0\"/><text x=\"150\" y=\"125\" font-family=\"Arial\" font-size=\"20\" text-anchor=\"middle\" fill=\"%23666\">${scientist.name}</text></svg>'">
                    <div class="scientist-info">
                        <div class="scientist-name">${scientist.name}</div>
                        <div class="scientist-field">
                            <i class="fas fa-graduation-cap"></i>
                            ${scientist.field}
                        </div>
                        <div class="scientist-facts">${scientist.facts}</div>
                    </div>
                `;
                
                scientistCard.addEventListener('click', function() {
                    openScientistModal(scientist);
                });
                
                container.appendChild(scientistCard);
            });
        }
        
        // Открытие модального окна с ученым
        function openScientistModal(scientist) {
            const modal = document.getElementById('scientist-modal');
            const content = document.getElementById('scientist-data');
            
            let achievementsHTML = '';
            scientist.achievements.forEach(achievement => {
                achievementsHTML += `<p><i class="fas fa-star" style="color: var(--warning);"></i> ${achievement}</p>`;
            });
            
            content.innerHTML = `
                <div class="scientist-modal-header">
                    <img src="${scientist.image}" alt="${scientist.name}" class="scientist-modal-image" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"200\" height=\"200\" viewBox=\"0 0 200 200\"><circle cx=\"100\" cy=\"100\" r=\"95\" fill=\"%23f0f0f0\" stroke=\"%236c5ce7\" stroke-width=\"5\"/><text x=\"100\" y=\"110\" font-family=\"Arial\" font-size=\"24\" text-anchor=\"middle\" fill=\"%23666\">${scientist.name.split(' ')[0]}</text></svg>'">
                    <div>
                        <h2>${scientist.name}</h2>
                        <div class="scientist-modal-field">${scientist.field}</div>
                        <p style="color: #666; max-width: 500px;">${scientist.facts}</p>
                    </div>
                </div>
                <div class="scientist-modal-details">
                    <h3>Основные достижения:</h3>
                    ${achievementsHTML}
                </div>
            `;
            
            modal.classList.add('active');
        }
    </script>
</body>
</html>
